
Derivation of the Evidence Lower Bound (ELBO)

\begin{equation}
    \begin{aligned}
        \log p_\theta(x) &= \mathbb{E}_{q_\phi(z|x)} \left[ \log p_\theta (x) \right] \\
        &= \mathbb{E}_{q_\phi(z|x)} \left[ \log \left[\frac{ p_\theta (x, z)}{p_\theta (z|x)} \right] \right] \\
        &= \mathbb{E}_{q_\phi(z|x)} \left[ \log \left[\frac{ p_\theta (x, z)}{q_\phi(z|x)} \frac{q_\phi(z|x)}{p_\theta (z|x)} \right] \right] \\
        &= \mathbb{E}_{q_\phi(z|x)} \left[ \log \left[\frac{p_\theta(x, z)}{q_\phi(z|x)} \right] \right] + \mathbb{E}_{q_\phi(z|x)} \left[ \log \left[\frac{q_\phi(z|x)}{p_\theta(z|x)} \right] \right] \\
        &= \mathcal{L}_{\theta, \phi}(x) + \mathcal{D}_{KL}(q_\phi(z|x)||p_\theta(z|x))
    \end{aligned}
\end{equation}

Here $\mathcal{L}_{\theta, \phi}(x)$ is the ELBO and $\mathcal{D}_{KL}(q_\phi(z|x)||p_\theta(z|x))$ is the Kullback-Leibler (KL) divergence which is non-negative.
\begin{equation}
    \implies \mathcal{L}_{\theta, \phi}(x) = \log p_\theta(x) - \mathcal{D}_{KL}(q_\phi(z|x)||p_\theta(z|x)) \leq \log p_\theta(x)
\end{equation}